# Zowe v2.18 – API ML Installation and Configuration Checklist

Use the following installation and configuration checklist to aguide you through the full installation and configuration of Zowe server-side components in Zowe version 2.18.x. In this Zowe version, API Mediaiton Layer sub-components (API Gateway, Discovery Service, and API Catalog) are deployed as inherently linked, distinct microservices, each running in its own process and typically on its own port within a Zowe instance.  Unlike later Zowe releases, Zowe v2.18.x does not offer an option to configure or deploy the API ML independently of other Zowe server-side components.

### Preparing for Installation

| Step | Task | Applicable Link | Results | Required Role |
| :--- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------ | :--------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------- |
| 1 | Review the Zowe server-side installation overview. | [Zowe server-side installation overview](https://docs.zowe.org/v2.18.x/user-guide/install-zos) | Knowledge about the basic installation stages and the roles and responsibilities to perform the installation. | System Programmer / Zowe Administrator |
| 2 | Prepare for installation, understanding concepts like instance directories and the runtime environment. | [Preparing for installation](https://docs.zowe.org/v2.18.x/user-guide/installandconfig) | Knowledge about the key concepts in server-side installation, including the separation of runtime and instance directories. | System Programmer / Zowe Administrator |
| 3 | Address pre-installation requirements, including verifying z/OS, Java, security, USS, storage, network, and z/OSMF. | [Addressing z/OS requirements](https://docs.zowe.org/v2.18.x/user-guide/systemrequirements-zos) | The following pre-installation requirements are addressed: <br> * z/OS (2.4+) <br> * Java (11+) <br> * security (SAF) <br> * USS enabled <br> * storage (zFS for runtime/instance) <br> * network (ports for Gateway, Discovery, App Server, ZSS) <br> * z/OSMF (recommended for full functionality) | System Programmer / Zowe Administrator | 



## Installing the Zowe z/OS Runtime
| Step | Task | Applicable Link | Results | Required Role |
| :--- | :----------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------- | :--------------------------------------- |
| 5 | Obtain and extract the Zowe v2.18 PAX or SMP/E package. | [All Zowe V2.x Releases](https://docs.zowe.org/v2.18.x/user-guide/install-zos) | Zowe v2.18 PAX file downloaded and extracted to `/usr/local/zowe/runtime`. | System Programmer / Zowe Administrator |
| 6 | **Option 1: [Install Zowe with SMP/E](./install-zowe-smpe)** <br />(Optionally install via [Server Install Wizard](./install-zowe-server-install-wizard.md))<br /><br /> **Option 2: [Install Zowe with z/OSMF from a portable software instance](./install-zowe-pswi)** <br /><br /> **Option 3: [Install Zowe SMP/E build with z/OSMF workflow](./install-zowe-smpe-zosmf-workflow)** <br /><br /> **Option 4: [Install Zowe via a convenience build (PAX file)](../user-guide/install-zowe-zos-convenience-build.md)**<br />(Optionally install via [Server Install Wizard](./install-zowe-server-install-wizard.md))     | [Initializing Zowe z/OS runtime](https://docs.zowe.org/v2.18.x/user-guide/configure-zowe-runtime) | Zowe runtime successfully deployed; `instance.env` and `zowe.yaml` generated. | System Programmer / Zowe Administrator |
| 7 | Validate environment variables for the Zowe runtime user (e.g., `JAVA_HOME`, `ZOWE_ROOT_DIR`). | [zowe.yaml file environment variables](https://docs.zowe.org/v2.18.x/user-guide/configuration-file-reference#zowe.yaml-file-environment-variables) | `JAVA_HOME` set to Java 11 path; `ZOWE_ROOT_DIR` pointing to `/usr/local/zowe`. | System Programmer / Zowe Administrator |

## Configuring with a z/OSMF Workflow
| Step | Task | Applicable Link | Results | Required Role |
| :--- | :------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------ | :--------------------------------------- |
| 9 | Import and start the “Install Zowe Server Components” z/OSMF workflow. |  **Option 1: [Configure Zowe with zwe init](../user-guide/initialize-zos-system.md)**  <br /><br /> **Option 2: [Configure Zowe with z/OSMF workflows](../user-guide/configure-zowe-zosmf-workflow.md)**  <br /><br /> **Option 3: [Configure Zowe via JCL](../user-guide/configuring-zowe-via-jcl.md)** | Zowe z/OSMF workflow imported and initiated in z/OSMF. | System Programmer / Zowe Administrator |


Here is a specific checklist for configuring security for the API Mediation Layer (API ML) and all other required security steps to successfully configure API ML on z/OS, tailored for **Zowe version 2.18**.

This checklist consolidates all relevant security-focused tasks, even those that are part of the broader Zowe installation, as they directly impact the secure operation of the API ML.

### Configuring API ML Security on z/OS

| Step | Task | Applicable Link | Results | Required Role |
| :--- | :---------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------- |
| 1 | Identify and reserve necessary network ports for the API Gateway, Discovery Service, and API Catalog. | [Zowe default ports](https://docs.zowe.org/v2.18.x/user-guide/configure-zos-system#zowe-default-ports) | Required ports (e.g., 7551 for Gateway, 7552 for Discovery, 7553 for Catalog) are identified and confirmed as available and open through any firewalls. | Network Administrator / Zowe Administrator |
| 2 | Run `zwe init security` to create SAF security profiles and ensure that the Zowe runtime user (typically `ZWESVUSR`) has permissions to utilize Zowe resources. | [Generating Zowe security configurations](https://docs.zowe.org/v2.18.x/admin/security/security-overview#generating-security-configurations) | SAF profiles for Zowe and its components (including API ML) are created, and `ZWESVUSR` is defined with necessary permissions for Zowe started tasks and USS access. | Security Administrator / Zowe Administrator |
| 3 | Configure Zowe security group IDs for API ML users and services, ensuring proper access control. | [Configuring Zowe security on z/OS](https://docs.zowe.org/v2.18.x/admin/security/security-configuration-zos) | Zowe security group IDs are assigned to relevant API ML users and services, adhering to organizational security policies. | Security Administrator |
| 4 | Create or import security certificates into the SAF keyring or a PKCS12 keystore for TLS/SSL communication. | [Configuring Zowe Certificates](https://docs.zowe.org/v2.18.x/user-guide/keystore#configuring-zowe-certificates) | A server certificate and its private key are generated or imported, ready for use by the API Gateway, Discovery Service, and other Zowe services. Trusted CA certificates are also established. | Security Administrator / Zowe Administrator |
| 5 | Grant the Zowe runtime user (e.g., `ZWESVUSR`) access to the SAF keyring or keystore containing Zowe's certificates. | [Granting Zowe user access to certificates and keyrings](https://docs.zowe.org/v2.18.x/user-guide/keystore#granting-the-zowe-started-task-user-access-to-certificates-and-keyrings) | `ZWESVUSR` has `READ` access to the `ZoweKeyring` (or other specified keystore) and its associated certificates. | Security Administrator |
| 6 | Update the `zowe.yaml` configuration file with the certificate locations and keyring names. | [Configuring Zowe Certificates](https://docs.zowe.org/v2.18.x/user-guide/keystore#configuring-zowe-certificates) | `zowe.yaml` is updated to correctly reference the certificate keystore (e.g., `safkeyring://ZWESVUSR/ZoweKeyring`) and other TLS/SSL settings for the API ML components. | Zowe Administrator |
| 7 | Test certificate trust and TLS communication between the API Gateway, Discovery Service, and API Catalog. | [Troubleshooting Zowe certificates](https://docs.zowe.org/v2.18.x/admin/security/security-troubleshoot-certificates) | All API ML components (Gateway, Discovery, Catalog) successfully establish mutual TLS (mTLS) trust and external TLS connections are validated (e.g., using `openssl s_client`). | Zowe Administrator / Security Administrator | 


## Configuring Certificates
| Step | Task | Applicable Link | Results | Required Role |
| :--- | :------------------------------------------------ | :------------------------------------------------------------ | :--------------------------------------------------------------------------------------------- | :--------------------------------------- |
| 15 | Create or import certificates into SAF or PKCS12 keystore. | [Configuring Zowe Certificates](https://docs.zowe.org/v2.18.x/user-guide/keystore#configuring-zowe-certificates) | Zowe certificate `ZOWE.SERVER.CERT` created in SAF and trusted. | Security Administrator / Zowe Administrator |
| 16 | Update `zowe.yaml` with certificate locations and keyring names. | [Configuring Zowe Certificates](https://docs.zowe.org/v2.18.x/user-guide/keystore#configuring-zowe-certificates) | `zowe.yaml` updated to point to `safkeyring://ZWESVUSR/ZOWE.KEYRING`. | Zowe Administrator |
| 17 | Test certificate trust between Gateway, Discovery, and Catalog. | [Troubleshooting Zowe certificates](https://docs.zowe.org/v2.18.x/admin/security/security-troubleshoot-certificates) | All components confirm trust; `openssl s_client` shows valid certificate chain. | Zowe Administrator / Security Administrator |

## Configuring High Availability
| Step | Task | Applicable Link | Results | Required Role |
| :--- | :----------------------------------------------- | :------------------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------------------------------------------- | :--------------------------------------- |
| 18 | Configure multiple Gateway instances if needed. | [Deploying multiple Zowe instances for HA](https://docs.zowe.org/v2.18.x/admin/high-availability/overview#deploying-multiple-zowe-instances) | Multiple Zowe instances deployed, each with its own Gateway. | Zowe Administrator / System Programmer |
| 19 | Enable caching service for session consistency. | [Configuring external caching service for Zowe HA](https://docs.zowe.org/v2.18.x/admin/high-availability/external-caching-service) | External Redis instance configured and connected for caching. | Zowe Administrator / System Programmer |
| 20 | Validate shared zFS directories or VSAM datasets for HA. | [Prerequisites for shared Zowe file system for HA](https://docs.zowe.org/v2.18.x/admin/high-availability/overview#prerequisites-for-shared-zowe-file-system) | Shared `/zowe/config` and `/zowe/workspace` zFS directories validated across LPARs. | System Programmer / Zowe Administrator |

## Starting and Stopping Zowe
| Step | Task | Applicable Link | Results | Required Role |
| :--- | :--------------------------------------- | :------------------------------------------------------------------------------- | :-------------------------------------------------------- | :--------------------------------------- |
| 21 | Start the Zowe runtime with `zwe start`. | [Starting a Zowe instance](https://docs.zowe.org/v2.18.x/manage/managing-zowe-instances#starting-and-stopping-a-zowe-instance) | Zowe started successfully; all services show as active. | Zowe Administrator / System Programmer |
| 22 | Stop with `zwe stop` or JCL STOP job. | [Stopping a Zowe instance](https://docs.zowe.org/v2.18.x/manage/managing-zowe-instances#starting-and-stopping-a-zowe-instance) | Zowe stopped successfully; JES logs confirm clean shutdown. | Zowe Administrator / System Programmer |

## Verifying Installation
| Step | Task | Applicable Link | Results | Required Role |
| :--- | :----------------------------------------------- | :-------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------- | :--------------------------------------- |
| 23 | Access the API Catalog UI: `https://<host>:<port>/apicatalog`. | [Verify Zowe API Mediation Layer is up and running](https://docs.zowe.org/v2.18.x/user-guide/installandconfig#verify-zowe-api-mediation-layer-is-up-and-running) | API Catalog UI loaded successfully in browser, showing registered services. | Application Developer / Zowe Administrator |
| 24 | Confirm Gateway and Discovery registration in logs. | [Verify Zowe API Mediation Layer is up and running](https://docs.zowe.org/v2.18.x/user-guide/installandconfig#verify-zowe-api-mediation-layer-is-up-and-running) | Zowe logs show "Registered service: api-gateway" and "Registered service: discovery-service". | Zowe Administrator |
| 25 | Onboard a sample service (e.g., z/OSMF API) and confirm routing. | [Onboarding APIs with Zowe API ML](https://docs.zowe.org/v2.18.x/user-guide/api-mediation/using-api-mediation-layer) | z/OSMF API successfully onboarded and accessible via the Zowe Gateway URL. | Application Developer / Zowe Administrator | 

