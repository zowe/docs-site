<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Page not found | Zowe Docs</title>
    <style type="text/css" media="screen">
      body {
        background-color: #f1f1f1;
        margin: 0;
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      }

      .container { margin: 50px auto 40px auto; width: 600px; text-align: center; }

      a { color: #4183c4; text-decoration: none; }
      a:hover { text-decoration: underline; }

      h1 { width: 800px; position:relative; left: -100px; letter-spacing: -1px; line-height: 60px; font-size: 60px; font-weight: 100; margin: 0px 0 50px 0; text-shadow: 0 1px 0 #fff; }
      p { color: rgba(0, 0, 0, 0.5); margin: 20px 0; line-height: 1.6; }

      ul { list-style: none; margin: 25px 0; padding: 0; }
      li { display: table-cell; font-weight: bold; width: 1%; }

      .logo { display: inline-block; margin-top: 35px; }
      .logo-img-2x { display: none; }
      @media
      only screen and (-webkit-min-device-pixel-ratio: 2),
      only screen and (   min--moz-device-pixel-ratio: 2),
      only screen and (     -o-min-device-pixel-ratio: 2/1),
      only screen and (        min-device-pixel-ratio: 2),
      only screen and (                min-resolution: 192dpi),
      only screen and (                min-resolution: 2dppx) {
        .logo-img-1x { display: none; }
        .logo-img-2x { display: inline-block; }
      }

      #suggestions {
        margin-top: 35px;
        color: #ccc;
      }
      #suggestions a {
        color: #666666;
        font-weight: 200;
        font-size: 14px;
        margin: 0 10px;
      }

    </style>
  </head>
  <body>

    <div class="container">

      <h1>404</h1>
      <p><strong>File not found</strong></p>

      <p>
        The site configured at this address does not contain the requested file.
      </p>

      <p id="legacy-url" style="display: none;">
        We have added documentation version support, so this may be caused by
        you are visiting a legacy link. Please click on this
        <a id="new-doc-link">link</a>, or the page will redirect in 10 seconds.
      </p>

      <div id="suggestions">
        <a href="https://zowe.org">Zowe.org</a> &mdash;
        <a href="https://docs.zowe.org/">Zowe Docs</a>
      </div>
    </div>

    <script type="text/javascript">
      var url = document && document.location && document.location.href,
        need,
        newUrl = 'https://docs.zowe.org/';
      var redirectTo = function(url) {
        // update html elements
        var nu = document.getElementById('new-doc-link');
        if (nu) {
          nu.href = url;
        }
        var p = document.getElementById('legacy-url');
        if (p) {
          p.style.display = 'block';
        }

        // redirect
        setTimeout(function() {
          window.location.replace(url);
        }, 10000);
      };
      if (url) {
        var m = url.match(/^https?:\/\/([^\/]+\/)([^\/]+\/)(.+)$/);
        if (m) {
          need = false;
          if (m[1] !== 'docs.zowe.org/') {
            need = true;
          }
          if (m[2] === 'docs-site/') {
            // this is legacy url, we need to remove /docs-site
            need = true;
          } else {
            m[3] = m[2] + m[3];
          }
          if (m[3].substr(0, 7) === 'latest/') {
            need = true;
            newUrl += 'stable/' + m[3].substr(7);
          } else if (m[3].substr(0, 7) !== 'stable/' &&
                    m[3].substr(0, 19) !== 'active-development/' &&
                    !m[3].match(/^v[0-9]+-[0-9]+-[0-9x]+\//)) {
            // this is a legacy link without version, redirect to latest version
            need = true;
            newUrl += 'stable/' + m[3];
          } else {
            newUrl += m[3];
          }
          if (need) {
            redirectTo(newUrl);
          }
        }
      }
    </script>
  </body>
</html>
